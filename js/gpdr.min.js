const CONFIG={db:"GPDR",key:"id",table:"agreements",ver:1};let request=window.indexedDB.open(CONFIG.db,CONFIG.ver);function get(e){return request.result.transaction(CONFIG.table,"readwrite").objectStore(CONFIG.table).get(e)}function getall(){return request.result.transaction(CONFIG.table,"readwrite").objectStore(CONFIG.table).getAll()}function put(e,t){request.result.transaction(CONFIG.table,"readwrite").objectStore(CONFIG.table).put({id:e,value:t})}function del(e){request.result.transaction(CONFIG.table,"readwrite").objectStore(CONFIG.table).delete(e)}function clear(){request.result.transaction(CONFIG.table,"readwrite").objectStore(CONFIG.table).clear()}function showGPDR(e){var t;null===document.getElementById("gpdr-modal")&&((t=document.createElement("div")).innerHTML=`<div class="container">
            <div class="modal" id="gpdr-modal">
                <div class="modal-dialog fixed-bottom small">
                    <div class="modal-content small rounded-0">
                        <div class="modal-header small py-2">
                            <h6 class="ms-0 text-start mb-0">
                                GPDR Declaration
                            </h6>
                        </div>
                        <div class="modal-body">
                            <p class="text-start">
                                This website was created in demonstration purposes. It collect and process
                                data only to present operation of it's functionality. All data provided by
                                user is removed after the end of demonstration process. Click button 'more"
                                to get more information about privacy policy. If you accept presented rules
                                click "accept" button.                                
                            </p>
                            <div class="w-100 text-end">
                                <a href="privacy.html" class="btn btn-sm btn-outline-secondary rounded-pill">More</a>
                                <button class="btn btn-sm btn-outline-secondary rounded-pill" 
                                    data-bs-dismiss="modal" 
                                    data-bs-target="#gpdr-modal"
                                    onclick="acceptGPDR()">
                                    Accept
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>`,document.body.appendChild(t)),new bootstrap.Modal("#gpdr-modal",{keyboard:!0}).show()}function checkGPDR(){var e=get("privacy");e.onsuccess=function(){try{"accepted"===!e.result.value&&showGPDR("#gpdr-modal")}catch{showGPDR("#gpdr-modal")}},e.onerror=function(){console.log("Error while checking GPDR status")}}function acceptGPDR(){put("privacy","accepted")}request.onupgradeneeded=function(){var e=request.result;e.objectStoreNames.contains(CONFIG.table)||e.createObjectStore(CONFIG.table,{keyPath:CONFIG.key})},request.onerror=function(){console.error("Unable to access database",request.error)},request.onsuccess=function(){request.result;checkGPDR()};